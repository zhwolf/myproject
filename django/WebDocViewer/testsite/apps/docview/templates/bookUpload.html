{% extends "base.html" %}

{% block header %}
 <script type="text/javascript" language="javascript">    

</script>
{% endblock %}

{% block container %}
    <div class="container">
  
  

    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
            {% if info %}
            <span class="label label-success  col-sm-offset-2">
               {{ info }}
            </span>
            {% endif %}
      
            {% if error %}
            <span class="label label-danger  col-sm-offset-2">{{ error }}</span>    
            </div>
            {% endif %}
            
            <form class="form-horizontal" role="form" action="." method="POST" {% if form.is_multipart %}enctype="multipart/form-data"{% endif %}>{% csrf_token %}
                {% if form.author.errors %}
                    <span class="label label-danger  col-sm-offset-2">{{ form.author.errors.as_text }}</span>                        
                {% endif %}
              <div class="form-group">
                <label for="id_author" class="col-sm-2 control-label">作者:</label>
                <div class="col-sm-10">
                    <input id="author"  name="author" type="text" class="form-control" placeholder="输入作者及出版社信息,以便搜索" 
                    value ="{{ form.author.value|default:""|safe }}" />
                </div>
              </div>


                {% if form.cost.errors %}
                    <span class="label label-danger  col-sm-offset-2">{{ form.cost.errors.as_text }}</span>   
                {% endif %}
              <div class="form-group">
                <label for="id_cost" class="col-sm-2 control-label">价值:</label>
                <div class="col-sm-10">
                    <input id="cost"  name="cost" type="text" class="form-control" placeholder="输入文档价值,免费文档请输入0" 
                    value ="{{ form.cost.value|default:""|safe }}" />
                </div>
              </div>
                
                {% if form.tags.errors %}
                    <span class="label label-danger  col-sm-offset-2">{{ form.tags.errors.as_text }}</span>   
                {% endif %}
              <div class="form-group">
                <label for="id_tags" class="col-sm-2 control-label">关键字:</label>
                <div class="col-sm-10">
                    <input id="tags" maxlength="200" name="tags" type="text" class="form-control" placeholder="输入文档关键字,以便搜索"
                    value ="{{ form.tags.value|default:""|safe }}" />
                </div>
              </div>
    
               {% if form.descr.errors %}
                    <span class="label label-danger  col-sm-offset-2">{{ form.descr.errors.as_text }}</span>   
                {% endif %}
              <div class="form-group">
                <label for="id_descr" class="col-sm-2 control-label">文档简介:</label>
                <div class="col-sm-10">
                    <textarea id="descr" name="descr" class="form-control" rows = "10" >{{ form.descr.value|default:""|safe }}</textarea>    
                </div>
              </div>
    
               {% if form.file.errors %}
                    <span class="label label-danger  col-sm-offset-2">{{ form.file.errors.as_text }}</span>   
                {% endif %}
              <div class="form-group">
                <label for="id_file" class="col-sm-2 control-label">选择文件</label>
                <div class="col-sm-10">
                    <input id="file" type="file" name="file" class="form-control" onchange="return FileUpload_onselect()" />
                </div>
              </div>
              
               <div class="form-group">
                 <div class=" col-sm-offset-4 col-sm-10">
                    <input type="submit" class="btn btn-default" value="上传文件" />
                 </div>   
            </form>
        
      </div>
    </div>
       
    <div class="row">
        
      <div class="col-sm-8 col-sm-offset-2">
      <span class="label label-primary">最新上传</span>
          <table class="table table-condensed">
                <thead>
                  <tr>
                    <th>文档名</th>
                    <th>分值</th>
                    <th>时间</th>
                    <th>修改</th>
                  </tr>
                </thead>
                <tbody>
                    {% for data in historydata %}
                  <tr>
                    <td>{{ data.name }}</td>
                    <td>{{ data.cost }}</td>
                    <td>{{ data.uploadtime }}</td>
                    <td><a  class="btn btn-primary btn-md active" role="button" href="/docview/bookedit/{{ data.id }}/" >修改</a></td>
                  </tr>
                    {% endfor %}
                </tbody>            
          </table>       
      </div>
    </div>            
        
    </div>        

{% endblock %}

{% block footer %}
  

  
{% endblock %}
